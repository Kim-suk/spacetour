<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>í–‰ì„± ì„ íƒ</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background-color: #000;
      font-family: 'Orbitron', 'Poppins', sans-serif;
      color: #0ff;
    }

    .reservation-header {
      text-align: center;
      margin: 40px 0 10px;
      font-size: 2.5rem;
      text-shadow: 0 0 10px #0ff;
    }

    .time-header {
      text-align: center;
      font-size: 2rem;
      margin-bottom: 30px;
      color: #0ff;
    }

   .planet-grid {
     display: flex;
     flex-wrap: wrap;
     gap: 20px;
   }

   .planet-card {
     width: 250px;
     text-align: center;
     border: 1px solid #ccc;
     border-radius: 8px;
     padding: 10px;
     position: relative;
   }

   .planet-thumbnail {
     width: 100%;
     height: 200px;
     background-size: cover;
     background-position: center;
     border-radius: 8px;
   }

   .select-btn {
     background-color: #4CAF50;
     color: white;
     border: none;
     padding: 10px;
     cursor: pointer;
     border-radius: 5px;
     font-size: 16px;
     margin-top: 10px;
   }

   .select-btn:hover {
     background-color: #45a049;
   }

   .planet-iframe {
     margin-top: 15px;
   }

    .planet-card h2 {
      margin: 15px 0;
      font-size: 1.2rem;
      color: gold;
    }

    .select-btn {
      padding: 10px 15px;
      background-color: gold;
      border: none;
      border-radius: 8px;
      font-weight: bold;
      color: black;
      cursor: pointer;
    }

    @media (max-width: 1024px) {
      .planet-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }
   /* ëª¨ë‹¬ ì „ì²´ ë°°ê²½ */
   .planet-modal {
     display: none;
     position: fixed;
     z-index: 999;
     left: 0;
     top: 0;
     width: 100%;
     height: 100%;
     overflow: auto;
     background-color: rgba(0,0,0,0.6);
   }

   /* ëª¨ë‹¬ ë‚´ë¶€ ì»¨í…ì¸  */
   .modal-content {
     background-color: #fff;
     margin: 5% auto;
     padding: 0;
     display: flex;
     width: 80%;
     max-width: 1000px;
     height: 600px;
     border-radius: 10px;
     overflow: hidden;
   }

   /* ì™¼ìª½ iframe ì˜ì—­ */
   .modal-left {
     flex: 2;
     background-color: #000;
   }

   /* ì˜¤ë¥¸ìª½ ì •ë³´ ì˜ì—­ */
   .modal-right {
     flex: 1;
     padding: 20px;
     overflow-y: auto;
   }

  </style>
</head>
<body>
   <!-- ëª¨ë‹¬ HTML -->
   <div id="planetModal" class="planet-modal">
     <div class="modal-content">
       <!-- ì™¼ìª½: 3D iframe -->
       <div class="modal-left">
         <iframe id="modal-iframe" width="100%" height="100%" frameborder="0"
           allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"></iframe>
       </div>

       <!-- ì˜¤ë¥¸ìª½: ì •ë³´ ì˜ì—­ -->
       <div class="modal-right">
         <h2 id="modal-title"></h2>
         <img id="modal-img" style="width: 100%; height: auto; margin-bottom: 10px;" />
         <p id="modal-price" style="font-weight: bold;"></p>
         <p id="modal-desc"></p>

         <!-- form íƒœê·¸ ì¶”ê°€ -->
         <form id="modalForm" method="post" action="/reserve/seat">
           <!-- title, price ê°’ì„ ë‹´ì„ hidden input -->
           <input type="hidden" name="planet" id="form-title" />
           <input type="hidden" name="price" id="form-price" />
           
           <button type="submit">ì¢Œì„ ì„ íƒ</button>
         </form>
       </div>
     </div>
   </div>
  <!-- ì˜ˆì•½ í—¤ë” -->
  <div>
    <h2 class="reservation-header">
      ğŸª <span th:text="${reserveDate}"></span> (<span th:text="${reserveDayOfWeek}"></span>)
    </h2>
    <h3 class="time-header">
      â° <span th:text="${reserveHour}"></span>ì‹œ <span th:text="${reserveMinute}"></span>ë¶„
     
    </h3>
   <h3><span th:text="${personCount}">ëª…</span></h3>
   
      
   
  </div>

  <div class="planet-grid">
    <!-- í–‰ì„± ì¹´ë“œ ë°˜ë³µ -->
    <div class="planet-card" data-planet-id="2369" data-thumbnail="https://solarsystem.nasa.gov/system/news_items/main_images/2369_mercury.jpg">
      <div class="planet-thumbnail"></div>
      <h2>ìˆ˜ì„± (Mercury)</h2>
      <button class="select-btn" onclick="loadPlanetIframe(this)">ì—¬í–‰ ê°€ê¸°</button>
      <div class="planet-iframe" style="display: none;"></div>
    </div>

    <div class="planet-card" data-planet-id="2342" data-thumbnail="https://solarsystem.nasa.gov/system/news_items/main_images/2342_venus.jpg">
      <div class="planet-thumbnail"></div>
      <h2>ê¸ˆì„± (Venus)</h2>
      <button class="select-btn" onclick="loadPlanetIframe(this)">ì—¬í–‰ ê°€ê¸°</button>
      <div class="planet-iframe" style="display: none;"></div>
    </div>

    <div class="planet-card" data-planet-id="2393" data-thumbnail="https://solarsystem.nasa.gov/system/news_items/main_images/2393_earth.jpg">
      <div class="planet-thumbnail"></div>
      <h2>ì§€êµ¬ (Earth)</h2>
      <button class="select-btn" onclick="loadPlanetIframe(this)">ì—¬í–‰ ê°€ê¸°</button>
      <div class="planet-iframe" style="display: none;"></div>
    </div>

    <div class="planet-card" data-planet-id="2372" data-thumbnail="https://solarsystem.nasa.gov/system/news_items/main_images/2372_mars.jpg">
      <div class="planet-thumbnail"></div>
      <h2>í™”ì„± (Mars)</h2>
      <button class="select-btn" onclick="loadPlanetIframe(this)">ì—¬í–‰ ê°€ê¸°</button>
      <div class="planet-iframe" style="display: none;"></div>
    </div>

    <div class="planet-card" data-planet-id="2375" data-thumbnail="https://solarsystem.nasa.gov/system/news_items/main_images/2375_jupiter.jpg">
      <div class="planet-thumbnail"></div>
      <h2>ëª©ì„± (Jupiter)</h2>
      <button class="select-btn" onclick="loadPlanetIframe(this)">ì—¬í–‰ ê°€ê¸°</button>
      <div class="planet-iframe" style="display: none;"></div>
    </div>

    <div class="planet-card" data-planet-id="2355" data-thumbnail="https://solarsystem.nasa.gov/system/news_items/main_images/2355_saturn.jpg">
      <div class="planet-thumbnail"></div>
      <h2>í† ì„± (Saturn)</h2>
      <button class="select-btn" onclick="loadPlanetIframe(this)">ì—¬í–‰ ê°€ê¸°</button>
      <div class="planet-iframe" style="display: none;"></div>
    </div>

    <div class="planet-card" data-planet-id="2344" data-thumbnail="https://solarsystem.nasa.gov/system/news_items/main_images/2344_uranus.jpg">
      <div class="planet-thumbnail"></div>
      <h2>ì²œì™•ì„± (Uranus)</h2>
      <button class="select-btn" onclick="loadPlanetIframe(this)">ì—¬í–‰ ê°€ê¸°</button>
      <div class="planet-iframe" style="display: none;"></div>
    </div>

    <div class="planet-card" data-planet-id="2364" data-thumbnail="https://solarsystem.nasa.gov/system/news_items/main_images/2364_neptune.jpg">
      <div class="planet-thumbnail"></div>
      <h2>í•´ì™•ì„± (Neptune)</h2>
      <button class="select-btn" onclick="loadPlanetIframe(this)">ì—¬í–‰ ê°€ê¸°</button>
      <div class="planet-iframe" style="display: none;"></div>
    </div>

    <div class="planet-card" data-planet-id="2400" data-thumbnail="https://solarsystem.nasa.gov/system/news_items/main_images/2400_ceres.jpg">
      <div class="planet-thumbnail"></div>
      <h2>ì„¸ë ˆìŠ¤ (Ceres)</h2>
      <button class="select-btn" onclick="loadPlanetIframe(this)">ì—¬í–‰ ê°€ê¸°</button>
      <div class="planet-iframe" style="display: none;"></div>
    </div>

    <div class="planet-card" data-planet-id="2357" data-thumbnail="https://solarsystem.nasa.gov/system/news_items/main_images/2357_pluto.jpg">
      <div class="planet-thumbnail"></div>
      <h2>ëª…ì™•ì„± (Pluto)</h2>
      <button class="select-btn" onclick="loadPlanetIframe(this)">ì—¬í–‰ ê°€ê¸°</button>
      <div class="planet-iframe" style="display: none;"></div>
    </div>

    <div class="planet-card" data-planet-id="2384" data-thumbnail="https://solarsystem.nasa.gov/system/news_items/main_images/2384_haumea.jpg">
      <div class="planet-thumbnail"></div>
      <h2>í•˜ìš°ë©”ì•„ (Haumea)</h2>
      <button class="select-btn" onclick="loadPlanetIframe(this)">ì—¬í–‰ ê°€ê¸°</button>
      <div class="planet-iframe" style="display: none;"></div>
    </div>

    <div class="planet-card" data-planet-id="2374" data-thumbnail="https://solarsystem.nasa.gov/system/news_items/main_images/2374_makemake.jpg">
      <div class="planet-thumbnail"></div>
      <h2>ë§ˆì¼€ë§ˆì¼€ (Makemake)</h2>
      <button class="select-btn" onclick="loadPlanetIframe(this)">ì—¬í–‰ ê°€ê¸°</button>
      <div class="planet-iframe" style="display: none;"></div>
    </div>

    <div class="planet-card" data-planet-id="2390" data-thumbnail="https://solarsystem.nasa.gov/system/news_items/main_images/2390_eris.jpg">
      <div class="planet-thumbnail"></div>
      <h2>ì—ë¦¬ìŠ¤ (Eris)</h2>
      <button class="select-btn" onclick="loadPlanetIframe(this)">ì—¬í–‰ ê°€ê¸°</button>
      <div class="planet-iframe" style="display: none;"></div>
    </div>
  </div>
  
  <script>
   document.addEventListener("DOMContentLoaded", () => {
     const stored = sessionStorage.getItem("personCount");
     console.log("planetì—ì„œ ì½ì€ ê°’:", stored);
   });

    // í˜ì´ì§€ ë¡œë”© ì‹œ ì¸ë„¤ì¼ ë°±ê·¸ë¼ìš´ë“œ ì´ë¯¸ì§€ ì„¤ì •
    document.addEventListener("DOMContentLoaded", function () {
      document.querySelectorAll('.planet-card').forEach(card => {
        const thumbUrl = card.dataset.thumbnail;
        const thumb = card.querySelector('.planet-thumbnail');
        thumb.style.backgroundImage = `url(${thumbUrl})`;
        thumb.style.backgroundSize = "cover";
        thumb.style.height = "200px";
        thumb.style.borderRadius = "12px";
      });
    });

    // ë²„íŠ¼ í´ë¦­ ì‹œ í–‰ì„± ì •ë³´ ëª¨ë‹¬ í‘œì‹œ
    function loadPlanetIframe(button) {
      const card = button.closest('.planet-card');
      const planetId = card.dataset.planetId;
      const thumbnail = card.dataset.thumbnail;
      const title = card.querySelector('h2').innerText;
      const price = `${(planetId % 10 + 1) * 10000}`;

      // í•„ìš”í•œ ì •ë³´ë“¤ì„ ê°ì²´ë¡œ ì „ë‹¬
      const data = {
        title: title,
        price: price,
        thumbnail: thumbnail,
        planetId: planetId
      };

      // ëª¨ë‹¬ ë„ìš°ê¸°
      openModal(data);
    }

    // ëª¨ë‹¬ì— ë°ì´í„° ì„¸íŒ… í›„ í‘œì‹œ
    function openModal(data) {
      document.getElementById('modal-title').innerText = data.title;
      document.getElementById('modal-img').src = data.thumbnail;
      document.getElementById('modal-price').innerText = `ğŸª™ ì˜ˆì•½ ë¹„ìš©: ${data.price}`;
      document.getElementById('modal-desc').innerText = `${data.title}ì— ëŒ€í•œ ë©‹ì§„ ì—¬í–‰ì´ ê¸°ë‹¤ë¦¬ê³  ìˆìŠµë‹ˆë‹¤!`;

      // hidden inputì— ê°’ ì„¸íŒ… (ì˜ˆì•½ í¼ì—ì„œ ì‚¬ìš©)
      document.getElementById('form-title').value = data.title;
      document.getElementById('form-price').value = data.price;

      // iframe ì„¤ì •
      const iframeUrl = `https://solarsystem.nasa.gov/gltf_embed/${data.planetId}/`;
      document.getElementById('modal-iframe').src = iframeUrl;
      document.getElementById('modal-iframe').style.display = 'block';

      // ëª¨ë‹¬ í‘œì‹œ
      document.getElementById('planetModal').style.display = 'block';
    }

    // ëª¨ë‹¬ ë‹«ê¸°
    function closeModal() {
      document.getElementById('planetModal').style.display = 'none';
      document.getElementById('modal-iframe').src = ''; // ë¦¬ì†ŒìŠ¤ í•´ì œ
    }

    // ë°”ê¹¥ í´ë¦­ ì‹œ ëª¨ë‹¬ ë‹«ê¸°
    window.onclick = function(event) {
      const modal = document.getElementById('planetModal');
      if (event.target === modal) {
        modal.style.display = 'none';
        document.getElementById('modal-iframe').src = ''; // ë¦¬ì†ŒìŠ¤ í•´ì œ
      }
    };
  </script>


</body>
</html>
